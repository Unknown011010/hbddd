<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Happy Birthday Nalaa">
    <title>HBD NALL</title>
    <link rel="stylesheet" href="style2.css">
    <style>
        /* Styling tambahan untuk pause message */
        #pauseMessage {
            color: rgb(234, 0, 255); /* Pinkish seperti link */
            font-style: italic;
            margin-top: 10px;
            display: none; /* Awalnya disembunyikan */
            text-align: center;
            font-size: 16px;
            padding: 10px;
        }
        body {
            outline: none; /* Hindari outline biru saat fokus */
        }
        main {
            max-height: 70vh;
            overflow-y: auto;
        }
    </style>
</head>

<body>
    <audio id="backsound" src="sempurna.mp3" autoplay loop></audio>
    
    <main>
        <h4 id="typingText">
            Haii cantikk selamat ulang tahun yahh..||PAUSE|| semoga umurnyaa diberikan keberkahan dan selalu diberikan kesehatan sama Yang Maha Kuasa..||PAUSE|| 
            Disini aku cuma mau bilang..||PAUSE|| aduhh malu sih sebenernyaa..||PAUSE|| I have crush on u.., butt being ur bf is not my list, haram juga hukumnya..||PAUSE|| I also need to focus on my life too...,||PAUSE||, Honestly, I need someone who can support each other and grow together. That's all.||PAUSE|| 
            kesannya kaya tiba" bangett yaa, maff yaa||PAUSE|| aku gatau harus ngomong apa ini aslii..||PAUSE|| itu ajaa sihh..||PAUSE||
            Ohh iyaa, aku juga mau minta maaf kalo selama ini aku ada banyakk salahh, ganggu kamu, ngechat kamu yang mungkin berlebihan.. maff yaa cantikk..||PAUSE||
            Nall.. aku mau tanyaa||PAUSE|| menurutmu aku orangnya gimanaa sii nall??
            tolong kasih aku saran dan tulis semuanya di sini, kalo semisal kamu ngerasa risih juga bilang ajaa gapapaa||PAUSE|| jujur aku maluu bgttt kagrfqwjeojvhitqj
        </h4>
    </main>

    <!-- Pesan instruksi saat pause -->
    <div id="pauseMessage">klik spasi buat lanjutinn</div>

    <a href="https://ngl.link/ibaaad_s" target="_blank" style="color: rgb(234, 0, 255); align-items: center; display: none; text-align: center; margin-top: 20px;" id="centerLink">ðŸ‘‰klik ini yaawwðŸ‘ˆ</a>
    
    <footer>
        <button id="backBtn" onclick="window.location.href='index.html'" style="position:fixed;top:20px;left:20px;z-index:999;">
            Kembali ke Halaman Utama
        </button>
    </footer>

    <script>
        // Event listener untuk audio background
        document.addEventListener("DOMContentLoaded", function() {
            var backsound = document.getElementById('backsound');
            if (backsound) {
                backsound.play().catch((error) => {
                    console.log("Audio autoplay gagal:", error);
                });
            }
        });

        // Event listener untuk button kembali
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById('backBtn').addEventListener('click', function() {
                const startOverlay = document.getElementById('startOverlay');
                const wrapper = document.getElementById('wrapper');
                if (startOverlay) startOverlay.style.display = 'none';
                if (wrapper) wrapper.style.display = 'block';
            });
        });

        // Efek Typewriter dengan Pause pada <br> DAN ||PAUSE||
        document.addEventListener("DOMContentLoaded", function() {
            const el = document.getElementById("typingText");
            const pauseMsg = document.getElementById("pauseMessage");
            const centerLink = document.getElementById("centerLink");

            // Ambil teks asli dan ganti <br> jadi \n untuk parsing
            let fullText = el.innerHTML.replace(/<br>/g, "\n");
            el.innerHTML = ""; // Kosongkan untuk animasi

            let currentIndex = 0;
            let isPaused = false;
            const speed = 50; // Kecepatan (ms per karakter)

            // Fungsi untuk menampilkan karakter berikutnya
            function typeNextChar() {
                if (currentIndex < fullText.length && !isPaused) {
                    let char = fullText[currentIndex];
                    
                    // Cek jika ini adalah \n (dari <br> = baris baru + pause)
                    if (char === "\n") {
                        el.innerHTML += "<br>";
                        currentIndex++;
                        triggerPause();
                        return;
                    }
                    
                    // Cek jika ini awal penanda pause di tengah kalimat: ||PAUSE||
                    if (char === '|' && fullText.substring(currentIndex, currentIndex + 9) === '||PAUSE||') {
                        // Skip seluruh penanda (tidak tampil di output) dan pause
                        currentIndex += 9; // Panjang '||PAUSE||' = 9 karakter
                        triggerPause();
                        return;
                    }
                    
                    // Tambahkan karakter biasa
                    el.innerHTML += char;
                    currentIndex++;
                    
                    // Lanjutkan animasi
                    setTimeout(typeNextChar, speed);
                } else if (currentIndex >= fullText.length) {
                    // Selesai seluruh teks
                    pauseMsg.style.display = 'none';
                    isPaused = false;
                    centerLink.style.display = "block";
                }
            }

            // Fungsi pause
            function triggerPause() {
                isPaused = true;
                pauseMsg.style.display = 'block';
                document.body.focus();
            }

            // Fungsi lanjut setelah spasi
            function continueTyping() {
                if (isPaused) {
                    isPaused = false;
                    pauseMsg.style.display = 'none';
                    typeNextChar();
                }
            }

            // Event listener spasi
            document.addEventListener('keydown', function(event) {
                if (event.keyCode === 32 && isPaused) {
                    event.preventDefault();
                    continueTyping();
                }
            });

            // Mulai animasi
            document.body.focus();
            typeNextChar();
        });
    </script>
</body>
</html>
